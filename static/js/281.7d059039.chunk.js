"use strict";(self.webpackChunk_example_website=self.webpackChunk_example_website||[]).push([[281],{68281:function(n,t,e){e.r(t),t.default={components:{},data:{},source:'# \u6743\u9650\n\n## \u4e0b\u8f7d\u4f9d\u8d56\n\n```bash\n$ npm i @antdp/authorized  # yarn add @antdp/authorized\n```\n\n## \u542f\u7528\u65b9\u5f0f\n\u914d\u7f6e\u5f00\u542f\u3002\u540c\u65f6\u9700\u8981 config/config.ts \u63d0\u4f9b\u6743\u9650\u914d\u7f6e\u3002\n```diff\nimport config from \'@antdp/config\';\nimport proxy from \'./proxy\';\nimport router from \'./router.json\';\nexport default config(router, {\n  proxy,\n  define: {\n+  ANTD_AUTH_CONF: {\n+    auth_menu: \'authMenu\',\n+    auth_btn: \'authBtn\',\n+    auth_check_url: true,\n  }\n});\n```\n\n### `ANTD_AUTH_CONF` \u6743\u9650\u914d\u7f6e\u53c2\u6570\n\n| \u53c2\u6570 | \u8bf4\u660e | \u7c7b\u578b | \u9ed8\u8ba4\u503c |\n| -------- | -------- | -------- | -------- |\n| auth_menu | \u50a8\u5b58\u83dc\u5355\u8def\u7531\u6743\u9650---\u672c\u5730keys | `string`  | `authMenu` |\n| auth_btn | \u50a8\u5b58\u6309\u94ae\u8def\u5f84\u6743\u9650---\u672c\u5730keys | `string`  | `authBtn` |\n| auth_check_url | \u5224\u65ad\u8def\u5f84\u662f\u5426\u6709\u6743\u9650\u7684\u5b57\u6bb5 \u9ed8\u8ba4\u503c`menuUrl`,\u5982\u679c\u5b57\u6bb5\u8bbe\u7f6e\u4e3a`undefined`\u5219`auth_menu`\u548c`auth_btn`\u50a8\u5b58\u5f62\u5f0f\u4e3a `["/web"]`,\u53cd\u4e4b\u50a8\u5b58\u5f62\u5f0f\u4e3a`[{menuUrl:"/web"}]` | `string`  | `menuUrl` |\n\n## \u8def\u7531\u83dc\u5355\n\u6211\u4eec\u914d\u7f6e\u597d`ANTD_AUTH_CONF`\u540e\uff0c\u5728layouts/BasicLayout.ts\u4e2d\u6dfb\u52a0`Authorized`\n```ts\nimport Authorized from \'@antdp/authorized\';\nimport BasicLayout from \'@antdp/basic-layouts\';\n\nconst Layout = () => {\n  const token =\'\'\n  return (\n    <Authorized authority={!!token} redirectPath="/login">\n      <BasicLayout\n        projectName="Ant Design"\n      />\n    </Authorized>\n  );\n};\n\nexport default Layout;\n\n```\n\n\u8fd9\u662f\u4f60\u7684\u8def\u7531\u83dc\u5355\uff08config/router.json\uff09\n```json\n[\n  {\n    "path": "/login",\n    "component": "@/layouts/UserLayout"\n  },\n  {\n    "path": "/",\n    "component": "@/layouts/BasicLayout",\n    "routes": [\n      {\n        "path": "/",\n        "redirectTo": "/welcome"\n      },\n      {\n        "path": "/welcome",\n        "name": "\u9996\u9875",\n        "icon": "welcome",\n        "locale": "welcome",\n        "component": "@/pages/Home/index"\n      },\n      {\n        "path": "/404",\n        "name": "404",\n        "hideInMenu": true,\n        "icon": "file-protect",\n        "component": "@/pages/404"\n      },\n      {\n        "path": "/403",\n        "name": "403",\n        "hideInMenu": true,\n        "icon": "file-protect",\n        "component": "@/pages/403"\n      }\n    ]\n  }\n]\n```\n\n\u767b\u9646\u540e\u540e\u7aef\u8fd4\u56de\u7684\u83dc\u5355\u5217\u8868\u53ef\u80fd\u5982\u4e0b\n\n```js\nconst menus = [\'/\', \'/welcome\', \'/404\', \'/403\'];\n```\n\n### \u8def\u7531\u5339\u914d\u8fc7\u7a0b\n- 1.\u5f53\u4f60\u767b\u9646\u6210\u529f\u540e\uff0c\u4f60\u9700\u5c06\u5176\u4fdd\u5b58\u4e8e\u4f60\u7684sessionStorage\u4e2d\uff0c\u50a8\u5b58\u7684\u5b57\u6bb5\u4e3a\u4f60`ANTD_AUTH_CONF`\u4e2d\u914d\u7684`auth_menu`\u5b57\u6bb5\uff0c\u5e76\u5728\u767b\u9646\u540e\u5b58\u50a8\u5728`sessionStorage`\u4e2d,\u5982`sessionStorage.setItem(\'authMenu\', JSON.stringify([]))`\n- 2.\u5f53\u4f60\u8df3\u8f6c\u81f3\u9875\u9762\u65f6\uff0c\u4f1a\u6839\u636esessionStorage\u4e2d`authMenu`\u8fdb\u884c\u6743\u9650\u5339\u914d\uff0c\u5982\u679c\u6ca1\u6709\u6743\u9650\u5219\u4f1a\u8df3\u5f80404\u6216403\u9875\u9762\n\n<strong>\u8bf7\u4fdd\u8bc1403 \u548c 404\u9875\u9762\u5b58\u5728</strong>\n\n\n## \u6309\u94ae\u6743\u9650\n\u5f88\u591a\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u4e5f\u4f1a\u5bf9\u6309\u94ae\u6743\u9650\u8fdb\u884c\u7ba1\u7406,\u8bf7\u63d0\u524d\u914d\u7f6e\u597d`ANTD_AUTH_CONF`\u4e2d\u914d\u7684`auth_btn`\u5b57\u6bb5\uff0c\u5e76\u5728\u767b\u9646\u540e\u5b58\u50a8\u5728`sessionStorage`\u4e2d,\u5982`sessionStorage.setItem("authBtn",JSON.stringify([\'/api/select\']))`\n\n```tsx\n// \u4e3a\u4e86\u6e32\u67d3\u8bbe\u7f6e\u7684\u672c\u5730\u6743\u9650\u6570\n\nimport React from "react"\nimport { AuthorizedBtn } from "@antdp/authorized"\nconst Demo = ()=>{\n  return (\n    <AuthorizedBtn path="/api/select" >\n      <button>\u6309\u94ae</button>\n    </AuthorizedBtn>\n  )\n}\nexport default Demo;\n```\n\n### AuthorizedBtn\u53c2\u6570\n| \u53c2\u6570 | \u8bf4\u660e | \u7c7b\u578b | \u9ed8\u8ba4\u503c |\n| -------- | -------- | -------- | -------- |\n| path | \u6743\u9650\u8def\u5f84 | `string`  | - |\n| children | \u5c55\u793a\u5185\u5bb9 | `React.ReactNode`  | - |\n\n## \u4f7f\u7528AuthorizedConfigProvider \u8bbe\u7f6e\u6309\u94ae\u6743\u9650\u914d\u7f6e\n\u4f7f\u7528 `AuthorizedConfigProvider`\u53ef\u4ee5\u81ea\u5df1\u8fdb\u884c\u91cd\u65b0\u8bbe\u7f6e\u7ec4\u4ef6\u5305\u88f9\u5185\u7684\u6240\u6709\u6309\u94ae\u7684\u6743\u9650\u53c2\u6570\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684\u6309\u94ae\u6743\u9650\u914d\u7f6e\n```ts\n  import React from "react"\n  import { AuthorizedBtn ,AuthorizedConfigProvider } from "@antdp/authorized"\n  const Page = ()=>{\n    useEffect(()=>{\n      sessionStorage.setItem("btn",JSON.stringify([{ menuUrl:"/api/select"} ]))\n    },[])\n    return (\n      <AuthorizedConfigProvider isCheckAuth={true} auth_btn="btn">\n        <AuthorizedBtn path="/api/select" >\n          <button>\u67e5\u8be2</button>\n        </AuthorizedBtn>\n      </AuthorizedConfigProvider>\n  )\n}\nexport default Page\n```\n\n### AuthorizedConfigProvider\u53c2\u6570\n| \u53c2\u6570 | \u8bf4\u660e | \u7c7b\u578b | \u9ed8\u8ba4\u503c |\n| -------- | -------- | -------- | -------- |\n| auth_menu | \u50a8\u5b58\u83dc\u5355\u8def\u7531\u6743\u9650---\u672c\u5730keys | `string`  | `authMenu` |\n| auth_btn | \u50a8\u5b58\u6309\u94ae\u8def\u5f84\u6743\u9650---\u672c\u5730keys | `string`  | `authBtn` |\n| auth_check_url | \u5224\u65ad\u8def\u5f84\u662f\u5426\u6709\u6743\u9650\u7684\u5b57\u6bb5 \u9ed8\u8ba4\u503c`menuUrl`,\u5982\u679c\u5b57\u6bb5\u8bbe\u7f6e\u4e3a`undefined`\u5219`auth_menu`\u548c`auth_btn`\u50a8\u5b58\u5f62\u5f0f\u4e3a `["/web"]`,\u53cd\u4e4b\u50a8\u5b58\u5f62\u5f0f\u4e3a`[{menuUrl:"/web"}]` | `string`  | `menuUrl` |\n| isCheckAuth | \u662f\u5426\u68c0\u67e5\u6743\u9650 | `boolean`  | `false` |\n| children | \u5b50\u5185\u5bb9 | `string`  | - |\n\n## License\n\nLicensed under the MIT License.'}}}]);
//# sourceMappingURL=281.7d059039.chunk.js.map