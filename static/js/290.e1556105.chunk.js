"use strict";(self.webpackChunk_example_website=self.webpackChunk_example_website||[]).push([[290],{1253:function(t,e,n){n.r(e),n.d(e,{AuthButton:function(){return l},AuthorizedBtn:function(){return l},AuthorizedConfigProvider:function(){return c},default:function(){return f},getAuthButton:function(){return m},getAuthorizedPage:function(){return i},useAuthorizedonfig:function(){return s}});var r=n(7896),u=n(56976),o=n(29855),i=function(t,e){if(ANTD_AUTH_CONF){var n=sessionStorage.getItem(ANTD_AUTH_CONF.auth_menu)?JSON.parse(sessionStorage.getItem(ANTD_AUTH_CONF.auth_menu)||"[]"):[],r=a(t,e).length>0,u=function(t,e){var n=!0;return-1===(ANTD_AUTH_CONF.auth_check_url?e.findIndex((function(e){return e[ANTD_AUTH_CONF.auth_check_url]===t})):e.findIndex((function(e){return e===t})))&&(n=!1),"/404"!==t&&"/403"!==t&&"/"!==t&&"/welcome"!==t||(n=!0),n}(e,n);return r&&!u?403:!(!r||!u)||404}return!0},a=function t(e,n,r){return void 0===r&&(r=[]),(e||[]).forEach((function(e){var u=e.path,o=e.routes;u==n||"/404"===u||"/403"===u||"/"===u||"/welcome"===u?r.push(e):o&&t(o,n,r)})),r},h=n(14218),d=(0,u.createContext)({auth_menu:"authMenu",auth_btn:"authBtn",auth_check_url:"menuUrl",isCheckAuth:!1}),c=function(t){var e=t.children,n=t.auth_menu,r=void 0===n?"authMenu":n,o=t.auth_btn,i=void 0===o?"authBtn":o,a=t.auth_check_url,c=t.isCheckAuth,s=void 0!==c&&c,l=u.useMemo((function(){return Reflect.has(t,"auth_check_url")?t.auth_check_url:"menuUrl"}),[a]);return(0,h.jsx)(d.Provider,{value:{auth_menu:r,auth_btn:i,auth_check_url:l,isCheckAuth:s},children:e})},s=function(){return(0,u.useContext)(d)},l=function(t){var e=t.path,n=t.children,r=s(),o=r.auth_btn,i=r.auth_check_url,a=r.isCheckAuth,d=(0,u.useMemo)((function(){var t=sessionStorage.getItem(o||"");return t?JSON.parse(t):[]}),[JSON.stringify({auth_btn:o,auth_check_url:i})]),c=(0,u.useMemo)((function(){return!a||(i?!!d.find((function(t){return t[i]===e})):!!d.find((function(t){return t===e})))}),[d,e,a]);return e&&a&&!c?(0,h.jsx)(u.Fragment,{}):(0,h.jsx)(u.Fragment,{children:n})},m=function(t,e){void 0===e&&(e={});var n=e||{},r=n.auth_btn,u=n.auth_check_url,o=function(){var t=r;t||(t="boolean"===typeof ANTD_AUTH_CONF?"":ANTD_AUTH_CONF.auth_btn);var e=sessionStorage.getItem(t||"");return e?JSON.parse(e):[]};return function(){var e=u||"";return e||(e="boolean"===typeof ANTD_AUTH_CONF?"":ANTD_AUTH_CONF.auth_check_url),e?!!o().find((function(n){return n[e]===t})):!!o().find((function(e){return e===t}))}()},f=function(t){return t.authority?(0,h.jsx)(u.Fragment,{children:u.Children.map(t.children,(function(t){return u.isValidElement(t)?u.cloneElement(t,(0,r.Z)({},t.props)):t}))}):(0,u.useMemo)((function(){return t.redirectPath?(0,h.jsx)(o.Fg,{to:t.redirectPath,replace:!0}):(0,h.jsx)(u.Fragment,{children:t.children})}),[t.redirectPath])}},73290:function(t,e,n){n.r(e),e.default={components:{45:function(){var t,e=(t=n(56976))&&t.__esModule?t:{default:t},r=n(1253);sessionStorage.setItem("authBtn",JSON.stringify([{menuUrl:"/api/select"}]));return function(){return e.default.createElement(r.AuthorizedConfigProvider,{isCheckAuth:!0},e.default.createElement(r.AuthorizedBtn,{path:"/api/select"},e.default.createElement("button",null,"\u67e5\u8be2")))}}(),65:function(){var t,e=(t=n(56976))&&t.__esModule?t:{default:t},r=n(1253);sessionStorage.setItem("authBtn",JSON.stringify([{menuUrl:"/api/select"},{menuUrl:"/api/select2"}]));return function(){return e.default.createElement(r.AuthorizedConfigProvider,{isCheckAuth:!0},e.default.createElement(r.AuthorizedBtn,{path:"/api/select"},e.default.createElement("button",null,"\u67e5\u8be2\u6309\u94ae1")),e.default.createElement(r.AuthorizedBtn,{path:"/api/select2"},e.default.createElement("button",null,"\u67e5\u8be2\u6309\u94ae2")))}}()},data:{45:{name:45,meta:{},code:'"use strict";\n\nvar _react = _interopRequireDefault(require("react"));\nvar _authorized = require("@antdp/authorized");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }\nsessionStorage.setItem("authBtn", JSON.stringify([{\n  menuUrl: "/api/select"\n}]));\nvar Demo = function Demo() {\n  return /*#__PURE__*/_react["default"].createElement(_authorized.AuthorizedConfigProvider, {\n    isCheckAuth: true\n  }, /*#__PURE__*/_react["default"].createElement(_authorized.AuthorizedBtn, {\n    path: "/api/select"\n  }, /*#__PURE__*/_react["default"].createElement("button", null, "\\u67E5\\u8BE2")));\n};\nreturn Demo;',language:"tsx",value:'sessionStorage.setItem("authBtn",JSON.stringify([{menuUrl:"/api/select"}]))\n\nimport React from "react"\nimport { AuthorizedBtn ,AuthorizedConfigProvider } from "@antdp/authorized"\n\nconst Demo = ()=>{\n  return (\n  <AuthorizedConfigProvider isCheckAuth={true} >\n    <AuthorizedBtn path="/api/select" >\n      <button>\u67e5\u8be2</button>\n    </AuthorizedBtn>\n  </AuthorizedConfigProvider>\n  )\n}\nexport default Demo;'},65:{name:65,meta:{},code:'"use strict";\n\nvar _react = _interopRequireDefault(require("react"));\nvar _authorized = require("@antdp/authorized");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }\n// \u4e3a\u4e86\u6e32\u67d3\u8bbe\u7f6e\u7684\u672c\u5730\u6743\u9650\u6570\u636e\nsessionStorage.setItem("authBtn", JSON.stringify([{\n  menuUrl: "/api/select"\n}, {\n  menuUrl: "/api/select2"\n}]));\nvar Demo = function Demo() {\n  return /*#__PURE__*/_react["default"].createElement(_authorized.AuthorizedConfigProvider, {\n    isCheckAuth: true\n  }, /*#__PURE__*/_react["default"].createElement(_authorized.AuthorizedBtn, {\n    path: "/api/select"\n  }, /*#__PURE__*/_react["default"].createElement("button", null, "\\u67E5\\u8BE2\\u6309\\u94AE1")), /*#__PURE__*/_react["default"].createElement(_authorized.AuthorizedBtn, {\n    path: "/api/select2"\n  }, /*#__PURE__*/_react["default"].createElement("button", null, "\\u67E5\\u8BE2\\u6309\\u94AE2")));\n};\nreturn Demo;',language:"tsx",value:'// \u4e3a\u4e86\u6e32\u67d3\u8bbe\u7f6e\u7684\u672c\u5730\u6743\u9650\u6570\u636e\nsessionStorage.setItem("authBtn",JSON.stringify([{menuUrl:"/api/select"},{menuUrl:"/api/select2"}]))\n\nimport React from "react"\nimport { AuthorizedBtn ,AuthorizedConfigProvider } from "@antdp/authorized"\n\nconst Demo = ()=>{\n  return (\n  <AuthorizedConfigProvider isCheckAuth={true} >\n    <AuthorizedBtn path="/api/select" >\n      <button>\u67e5\u8be2\u6309\u94ae1</button>\n    </AuthorizedBtn>\n    <AuthorizedBtn path="/api/select2" >\n      <button>\u67e5\u8be2\u6309\u94ae2</button>\n    </AuthorizedBtn>\n  </AuthorizedConfigProvider>\n  )\n}\nexport default Demo;\n'}},source:'@antdp/authorized\n---\n\n[![npm](https://img.shields.io/npm/v/@antdp/authorized.svg?maxAge=3600)](https://www.npmjs.com/package/@antdp/authorized)\n[![npm download](https://img.shields.io/npm/dm/@antdp/authorized.svg?style=flat)](https://www.npmjs.com/package/@antdp/authorized)\n\n\u6743\u9650\u5224\u65ad\u7ec4\u4ef6\u6216\u65b9\u6cd5\uff0c\u901a\u8fc7\u5224\u65ad\u662f\u5426\u8fdb\u5165\u4e3b\u754c\u9762\u8fd8\u662f\u767b\u5f55\u754c\u9762\u3002\n\n## Installation\n\n```bash\n$ npm i @antdp/authorized  # yarn add @antdp/authorized\n```\n\n## \u9875\u9762\u6743\u9650\u5224\u65ad\u91cd\u5b9a\u5411\n\n```jsx\nimport React from \'react\';\nimport BasicLayout from \'@antdp/basic-layouts\';\nimport UserLogin from \'@antdp/user-login\';\nimport Authorized from \'@antdp/authorized\';\n\n// \u5165\u53e3\u9875\u9762\nconst UserLayout = (props) => {\n  return (\n    <Authorized authority={!props.token} redirectPath="/login">\n      <UserLogin />\n    </Authorized>\n  )\n};\n\n// \u767b\u5f55\u9875\u9762\nconst Layout = (props) => {\n  return (\n    <Authorized authority={!props.token} redirectPath="/">\n      <BasicLayout />\n    </Authorized>\n  )\n};\n```\n\n## AuthorizedConfigProvider \u8bbe\u7f6e\u6309\u94ae\u6743\u9650\u914d\u7f6e\n\n\u4f7f\u7528 `AuthorizedConfigProvider`\u53ef\u4ee5\u81ea\u5df1\u8fdb\u884c\u91cd\u65b0\u8bbe\u7f6e\u7ec4\u4ef6\u5305\u88f9\u5185\u7684\u6240\u6709\u6309\u94ae\u7684\u6743\u9650\u53c2\u6570\uff0c\u4e0d\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684\u6309\u94ae\u6743\u9650\u914d\u7f6e\n```tsx mdx:preview\nsessionStorage.setItem("authBtn",JSON.stringify([{menuUrl:"/api/select"}]))\n\nimport React from "react"\nimport { AuthorizedBtn ,AuthorizedConfigProvider } from "@antdp/authorized"\n\nconst Demo = ()=>{\n  return (\n  <AuthorizedConfigProvider isCheckAuth={true} >\n    <AuthorizedBtn path="/api/select" >\n      <button>\u67e5\u8be2</button>\n    </AuthorizedBtn>\n  </AuthorizedConfigProvider>\n  )\n}\nexport default Demo;\n```\n\n## \u6309\u94ae\u6743\u9650\n\n```tsx mdx:preview\n// \u4e3a\u4e86\u6e32\u67d3\u8bbe\u7f6e\u7684\u672c\u5730\u6743\u9650\u6570\u636e\nsessionStorage.setItem("authBtn",JSON.stringify([{menuUrl:"/api/select"},{menuUrl:"/api/select2"}]))\n\nimport React from "react"\nimport { AuthorizedBtn ,AuthorizedConfigProvider } from "@antdp/authorized"\n\nconst Demo = ()=>{\n  return (\n  <AuthorizedConfigProvider isCheckAuth={true} >\n    <AuthorizedBtn path="/api/select" >\n      <button>\u67e5\u8be2\u6309\u94ae1</button>\n    </AuthorizedBtn>\n    <AuthorizedBtn path="/api/select2" >\n      <button>\u67e5\u8be2\u6309\u94ae2</button>\n    </AuthorizedBtn>\n  </AuthorizedConfigProvider>\n  )\n}\nexport default Demo;\n\n```\n\n## \u5224\u65ad\u83dc\u5355\u662f\u5426\u6709\u6743\u9650\n\n```ts\nimport { getAuthorizedPage } from \'@antdp/authorized\';\nconst isCheckMenu = getAuthorizedPage([{path:"/web"},{path:"/examples"}],"/examples")\n\n```\n\n## API\n\n| \u53c2\u6570 | \u8bf4\u660e | \u7c7b\u578b | \u9ed8\u8ba4\u503c |\n| -------- | -------- | -------- | -------- |\n| authority | \u51c6\u5165\u6743\u9650/\u6743\u9650\u5224\u65ad | `boolean`  | - |\n| redirectPath | \u6743\u9650\u5f02\u5e38\u65f6\u91cd\u5b9a\u5411\u7684\u9875\u9762\u8def\u7531 | `string`  | - |\n| children | \u6743\u9650\u5f02\u5e38\u65f6\u91cd\u5b9a\u5411\u7684\u9875\u9762\u8def\u7531 | `React.ReactNode`  | - |\n| children | \u6743\u9650\u5f02\u5e38\u65f6\u91cd\u5b9a\u5411\u7684\u9875\u9762\u8def\u7531 | `React.ReactNode`  | - |\n\n### AuthorizedConfigProviderProps\n| \u53c2\u6570 | \u8bf4\u660e | \u7c7b\u578b | \u9ed8\u8ba4\u503c |\n| -------- | -------- | -------- | -------- |\n| auth_menu | \u50a8\u5b58\u83dc\u5355\u8def\u7531\u6743\u9650---\u672c\u5730keys | `string`  | `authMenu` |\n| auth_btn | \u50a8\u5b58\u6309\u94ae\u8def\u5f84\u6743\u9650---\u672c\u5730keys | `string`  | `authBtn` |\n| auth_check_url | \u5224\u65ad\u8def\u5f84\u662f\u5426\u6709\u6743\u9650\u7684\u5b57\u6bb5 \u9ed8\u8ba4\u503c`menuUrl`,\u5982\u679c\u5b57\u6bb5\u8bbe\u7f6e\u4e3a`undefined`\u5219`auth_menu`\u548c`auth_btn`\u50a8\u5b58\u5f62\u5f0f\u4e3a `["/web"]`,\u53cd\u4e4b\u50a8\u5b58\u5f62\u5f0f\u4e3a`[{menuUrl:"/web"}]` | `string`  | `menuUrl` |\n| isCheckAuth | \u662f\u5426\u68c0\u67e5\u6743\u9650 | `boolean`  | `false` |\n| children | \u5b50\u5185\u5bb9 | `string`  | - |\n\n### AuthorizedBtnProps\n| \u53c2\u6570 | \u8bf4\u660e | \u7c7b\u578b | \u9ed8\u8ba4\u503c |\n| -------- | -------- | -------- | -------- |\n| path | \u6743\u9650\u8def\u5f84 | `string`  | - |\n| children | \u5c55\u793a\u5185\u5bb9 | `React.ReactNode`  | - |\n\n### GetAuthorizedPageProps\n| \u53c2\u6570 | \u8bf4\u660e | \u7c7b\u578b | \u9ed8\u8ba4\u503c |\n| -------- | -------- | -------- | -------- |\n| getAuthorizedPage | \u9875\u9762\u6743\u9650\u662f\u5426\u6709\u6743\u9650 | `(menuRouter: Array<any>, path: string) => boolean | 404 | 403`  | - |\n\n\n\n\n'}}}]);
//# sourceMappingURL=290.e1556105.chunk.js.map