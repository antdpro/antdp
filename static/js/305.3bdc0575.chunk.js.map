{"version":3,"file":"static/js/305.3bdc0575.chunk.js","mappings":"iIACA,WACIA,WAAY,CAAG,EACfC,KAAM,CAAC,EACPC,OAAQ,8iQ","sources":["pages/update/README.md"],"sourcesContent":["\nexport default {\n    components: {  },\n    data: {},\n    source: \"ä» v1 åˆ° v2\\n===\\n\\n### å‡çº§å‡†å¤‡\\n- 1.è¯·å…ˆå‡çº§åˆ° 1.x çš„æœ€æ–°ç‰ˆæœ¬ã€‚\\n\\n\\n### æŠ€æœ¯è°ƒæ•´\\n- 1.[antd ä» v4 åˆ° v5](https://ant.design/docs/react/migration-v5-cn)\\n- 2.[umi  ä» v3 åˆ° v4](https://ant.design/docs/react/migration-v5-cn)\\n- 3.`basic-layouts` é‡æ„ï¼Œå¹¶æ·»åŠ  `useLayouts` çš„hooks [`2b3ad38`](https://github.com/antdpro/antdp/commit/2b3ad38deca0b31b9f575980bf1239249ae738b5)\\n- 4.`Authorized` æ·»åŠ  `AuthorizedConfigProviderå’ŒuseAuthorizedonfig` [`cf75f09`](https://github.com/antdpro/antdp/commit/cf75f096ad0646a1e831f45141cc7c84c1442c2d)\\n- 5.`react` å‡çº§è‡³ `18.x`\\n\\n### ä¿®å¤åŠŸèƒ½\\n- ğŸ fix:ä¿®å¤æ–‡æ¡£å’Œæƒé™å–å€¼åˆ¤æ–­ [`978d203`](https://github.com/antdpro/antdp/commit/978d2038c395d0252bb4409973703d776c10213c)\\n- ğŸ fix:ä¿®å¤é¢„è§ˆæ ‡ç­¾ [`5968554`](https://github.com/antdpro/antdp/commit/5968554197f09bd5d8b1f75331f2102bf38e4ec2)\\n- ğŸ fix:ä¿®å¤ umi setup [`a128746`](https://github.com/antdpro/antdp/commit/a128746362ad5804d0e94c9e9be0daff1a1b5cf3)\\n- ğŸ fix:ä¿®å¤æ¡ˆä¾‹åŒ…ç‰ˆæœ¬ [`f45300b`](https://github.com/antdpro/antdp/commit/f45300b90841b2435745c9a3460fd74c2131383b)\\n- ğŸ† type:ä¿®å¤ç±»å‹ [`29eeb92`](https://github.com/antdpro/antdp/commit/29eeb926c64a1958d7e8723462b75d28bddb1c90)\\n- ğŸ fix:ä¿®å¤è¡¨å•è®¾ç½®åˆå§‹éšè—è¡¨å•é¡¹ [`86ac78f`](https://github.com/antdpro/antdp/commit/86ac78f4af5c7409c981501f633b60989d5c97b0)\\n- ğŸ fix:ä¿®å¤æœ¬åœ°æ–‡æ¡£é¢„è§ˆç½‘ç«™ [`869d72b`](https://github.com/antdpro/antdp/commit/869d72bc69132fd5b4f2faa4044ffd923e8f16ce)\\n- ğŸ† type:ä¿®å¤ç±»å‹ [`2b68319`](https://github.com/antdpro/antdp/commit/2b683192c1f3af1fed393c6329e8789ad09b986a)\\n- ğŸ fix:ä¿®å¤èœå•éšè—é—®é¢˜ [`9bc0070`](https://github.com/antdpro/antdp/commit/9bc00702e76eb8548dc7f0f9022afffa804f85cf)\\n- ğŸ’„ chore:ä¿®å¤websiteä¾èµ–é—®é¢˜ [`7ce8e30`](https://github.com/antdpro/antdp/commit/7ce8e301a0880b36d9ef923f3c4e4477663dafe7)\\n- ğŸ’„ chore:ä¿®å¤ä¾èµ– [`a17a49a`](https://github.com/antdpro/antdp/commit/a17a49acae6e63cf38a0c8fb8941b8cb902652b9)\\n- ğŸ fix:ä¿®å¤æ¸²æŸ“åˆ¤æ–­ [`c5e96df`](https://github.com/antdpro/antdp/commit/c5e96df0d50922ce08beef55844a0efe76735bbc)\\n- ğŸ fix:ä¿®å¤å‘½ä»¤è¿è¡Œ [`8083747`](https://github.com/antdpro/antdp/commit/80837475fd9b8aa177d53a99ef8b41cc12b93273)\\n- ğŸ fix:ä¿®å¤å…¨å±æŒ‰é’® [`4f0c851`](https://github.com/antdpro/antdp/commit/4f0c8515a5467e776bc243b33f8ac67fec6c5523)\\n\\n### å¼€å§‹å‡çº§\\n\\n#### ä¾èµ–å±‚å‡çº§\\n```diff\\n  \\\"dependencies\\\": {\\n     ...\\n-    \\\"@antdp/antdp-ui\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/authorized\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/basic-layouts\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/edit-table\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/hooks\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/page-loading\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/request\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/user-login\\\": \\\"1.8.27\\\",\\n-    \\\"ahooks\\\": \\\"~3.3.0\\\",\\n-    \\\"antd\\\": \\\"4.24.1\\\",\\n-    \\\"react\\\": \\\"17.0.2\\\",\\n-    \\\"react-dom\\\": \\\"17.0.2\\\"\\n+    \\\"@antdp/antdp-ui\\\": \\\"2.0.0\\\",\\n+    \\\"@antdp/authorized\\\": \\\"1.8.27\\\",\\n+    \\\"@antdp/basic-layouts\\\": \\\"1.8.27\\\",\\n+    \\\"@antdp/edit-table\\\": \\\"1.8.27\\\",\\n+    \\\"@antdp/hooks\\\": \\\"1.8.27\\\",\\n+    \\\"@antdp/page-loading\\\": \\\"1.8.27\\\",\\n+    \\\"@antdp/request\\\": \\\"1.8.27\\\",\\n+    \\\"@antdp/user-login\\\": \\\"1.8.27\\\",\\n+    \\\"ahooks\\\": \\\"~3.7.2\\\",\\n+    \\\"antd\\\": \\\"5.4.2\\\",\\n+    \\\"react\\\": \\\"18.2.0\\\",\\n+    \\\"react-dom\\\": \\\"18.2.0\\\"\\n     ...\\n  }\\n```\\n\\n```diff\\n  \\\"devDependencies\\\": {\\n-    \\\"@antdp/config\\\": \\\"1.8.27\\\",\\n-    \\\"@antdp/dependencies\\\": \\\"1.8.27\\\",\\n-    \\\"@umijs/plugin-dva\\\": \\\"0.13.2\\\",\\n-    \\\"@umijs/plugin-locale\\\": \\\"0.16.0\\\",\\n-    \\\"@umijs/plugin-model\\\": \\\"2.6.2\\\",\\n-    \\\"@umijs/plugin-request\\\": \\\"2.9.0\\\",\\n-    \\\"@umijs/test\\\": \\\"3.5.20\\\",\\n-    \\\"lint-staged\\\": \\\"~12.3.7\\\",\\n-    \\\"prettier\\\": \\\"2.4.1\\\",\\n-    \\\"react-sortable-hoc\\\": \\\"2.0.0\\\",\\n-    \\\"umi\\\": \\\"~3.5.35\\\"\\n+    \\\"@antdp/config\\\": \\\"2.0.0-bate-4.1\\\",\\n+    \\\"@antdp/dependencies\\\": \\\"2.0.0-bate-4.1\\\",\\n+    \\\"@umijs/max\\\": \\\"~4.0.47\\\",\\n+    \\\"@umijs/plugin-model\\\": \\\"~2.6.2\\\",\\n+    \\\"lint-staged\\\": \\\"~13.0.4\\\",\\n+    \\\"prettier\\\": \\\"2.8.1\\\"\\n  }\\n```\\n\\n#### ä»£ç å±‚ä¿®æ”¹\\n\\nUmi 4 ä¸­å°† react-router@5 å‡çº§åˆ° react-router@6ï¼Œæ‰€ä»¥è·¯ç”±ç›¸å…³çš„ä¸€äº› api å­˜åœ¨ç€ä½¿ç”¨ä¸Šçš„å·®å¼‚ã€‚\\n\\nprops é»˜è®¤ä¸ºç©ºå¯¹è±¡ï¼Œä»¥ä¸‹å±æ€§éƒ½ä¸èƒ½ç›´æ¥ä» props ä¸­å–å‡º\\n![](./images/O1CN01H9ScQv21ymaLkwZ8p_!!6000000007054-2-tps-1210-374.png)<!--rehype:style=max-width: 650px;width: 100%;-->\\n\\n#### AuthorizedConfigProvider\\nä½¿ç”¨ `AuthorizedConfigProvider`å¯ä»¥è‡ªå·±è¿›è¡Œé‡æ–°è®¾ç½®ç»„ä»¶åŒ…è£¹å†…çš„æ‰€æœ‰æŒ‰é’®çš„æƒé™å‚æ•°ï¼Œä¸ä½¿ç”¨é»˜è®¤é…ç½®çš„æŒ‰é’®æƒé™é…ç½®\\n```diff\\n  sessionStorage.setItem(\\\"authBtn\\\",JSON.stringify([{menuUrl:\\\"/api/select\\\"}]))\\n\\n  import React from \\\"react\\\"\\n+ import { AuthorizedBtn ,AuthorizedConfigProvider } from \\\"@antdp/authorized\\\"\\n\\n  const Page = ()=>{\\n    return (\\n+      <AuthorizedConfigProvider isCheckAuth={true} >\\n        <AuthorizedBtn path=\\\"/api/select\\\" >\\n          <button>æŸ¥è¯¢</button>\\n        </AuthorizedBtn>\\n+      </AuthorizedConfigProvider>\\n  )\\n}\\nexport default Page;\\n```\\n\\n\\n#### history\\n```diff\\n+ import { history } from '@umijs/max';\\nexport default function Page(props) {\\n  return (\\n    <div onClick={()=>{\\n-     props.history.push('list');\\n+     history.push('list');\\n    }}>\\n    </div>\\n  );\\n} \\n```\\n#### location\\n```diff\\n+ import { useLocation } from '@umijs/max';\\nexport default function Page(props) {\\n+    let location = useLocation();\\n  return (\\n    <div>\\n-     { props.location }\\n+     { location }\\n    </div>\\n  );\\n}\\n```\\n\\n#### match\\n```diff\\n+ import { useMatch } from '@umijs/max';\\nexport default function Page(props) {\\n+ const match = useMatch({ path: 'list/search/:type' });\\n  return (\\n    <div>\\n-     { props.match }\\n+     { match }\\n    </div>\\n  );\\n}\\n```\\nåœ¨ class component ç»„ä»¶ä¸­çš„ä½¿ç”¨æ–¹å¼:\\n```diff\\n+import { matchPath } from '@umijs/max';\\nclass Page extends Component {\\n+  match = matchPath({ path: 'list/search/:type' }, window.location.pathname);\\n  state = {}\\n  render() {\\n    return (\\n      <div>\\n-        {this.props.match.type}\\n+        {this.match.type} \\n      </div>\\n    )\\n  }\\n}\\n```\\n#### SelectLang å’Œ useIntl\\n```diff\\n+ import { SelectLang,useIntl } from '@umijs/max';\\nimport BasicLayout from '@antdp/basic-layouts';\\nexport default function Page(props) {\\n+ const match = useMatch({ path: 'list/search/:type' });\\n  return (\\n    <BasicLayout\\n+      topRightLanguage={<SelectLang />}\\n+      intlLanguage={useIntl()}\\n    />\\n  );\\n}\\n```\\n\\n#### useModel\\n\\n```diff\\n+ import { useModel } from '@umijs/max';\\nexport default function Page(props) {\\n+ const { token } = useModel('user', (model) => ({ ...model }));\\n  return (\\n    <div>{token}</div>\\n  );\\n}\\n```\\n\\næ›´å¤š `Umi` ç›¸å…³ [`api`](https://umijs.org/docs/api/api)\\néœ€è¦æ³¨æ„ match æ•°æ®çš„å·®å¼‚ï¼š\\n```bash\\n// match v5\\nisExact: true\\nparams: {}\\npath: \\\"/users/abc\\\"\\nurl: \\\"/users/abc\\\"\\n\\n// match v6\\nparams:{  }\\npathname: \\\"/list/search/articles\\\"\\npathnameBase: \\\"/list/search/articles\\\"\\npattern: {path: 'list/search/:type'}\\n```\\næ›´å¤šæ”¹åŠ¨å’Œ api å˜æ›´ï¼Œè¯·æŸ¥é˜…[`react-router@6`](https://reactrouter.com/en/6.10.0)\\n\\n#### location ä¸­çš„ query æ‰¾ä¸åˆ°ï¼Ÿ\\n```diff\\n- const { query } = history.location;\\n+ import { parse } from 'query-string';\\n+ const query = parse(history.location.search);\\n```\"\n  }"],"names":["components","data","source"],"sourceRoot":""}